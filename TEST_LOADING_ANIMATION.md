# 加载动画功能测试指南

## 功能概述
使用 Phaser Tween 系统实现平滑的加载动画，包括视频加载和数据导入进度显示。

## 测试步骤

### 1. 测试视频加载动画

#### 方法 1：刷新页面
1. 访问 http://localhost:8001
2. 刷新页面（F5）
3. 观察加载动画：
   - 应显示半透明黑色遮罩（淡入效果）
   - 显示"正在加载视频..."文字
   - 显示旋转的绿色加载图标
   - 视频加载完成后自动淡出消失

#### 方法 2：更换视频
1. 修改 index.html 中的视频路径
2. 刷新页面
3. 观察加载动画效果

### 2. 测试数据导入动画

#### 准备测试数据
1. 先创建一些热区（至少 10 个）
2. 点击"💾"按钮导出数据
3. 保存 JSON 文件

#### 测试导入
1. 点击"📂"按钮
2. 选择刚才保存的 JSON 文件
3. 观察加载动画：
   - 显示"正在导入数据..."
   - 显示进度条（绿色）
   - 进度条平滑增长
   - 显示导入进度文字："正在导入 X/Y"
   - 完成后淡出，显示成功提示

### 3. 测试大量数据导入

#### 创建测试数据
在浏览器控制台执行：
```javascript
// 创建 50 个测试热区
perfTest.createTestHotspots(50);

// 导出数据
const scene = game.scene.getScene('EditorScene');
const data = window.dataManager.exportData(scene);

// 保存到剪贴板
copy(JSON.stringify(data, null, 2));
```

#### 测试导入
1. 将数据保存为 JSON 文件
2. 导入该文件
3. 观察进度条平滑增长
4. 验证所有热区正确导入

### 4. 测试错误处理

#### 测试视频加载失败
1. 修改 index.html 中的视频路径为无效路径
2. 刷新页面
3. 应显示加载动画
4. 加载失败后动画应自动消失
5. 显示错误提示

#### 测试数据导入失败
1. 创建一个无效的 JSON 文件（格式错误）
2. 尝试导入
3. 加载动画应自动消失
4. 显示错误提示

## 控制台测试命令

```javascript
// 获取 LoadingManager 实例
const scene = game.scene.getScene('EditorScene');
const loader = scene.loadingManager;

// 手动显示加载动画（无进度条）
loader.show('测试加载...', false);

// 手动显示加载动画（带进度条）
loader.show('测试进度...', true);

// 更新进度（0-1）
loader.updateProgress(0.5);  // 50%
loader.updateProgress(0.8);  // 80%

// 更新消息
loader.updateMessage('正在处理...');

// 隐藏加载动画
loader.hide();

// 隐藏并执行回调
loader.hide(() => {
    console.log('加载完成！');
});
```

## 动画特性验证

### 淡入淡出效果
- ✅ 遮罩淡入（300ms）
- ✅ 文字淡入（300ms）
- ✅ 图标淡入（300ms）
- ✅ 进度条淡入（300ms）
- ✅ 所有元素淡出（300ms）

### 旋转动画
- ✅ 加载图标持续旋转
- ✅ 旋转速度：360度/秒
- ✅ 平滑无卡顿

### 进度条动画
- ✅ 宽度平滑过渡（200ms）
- ✅ 进度值限制在 0-1 之间
- ✅ 颜色：绿色（#00ff00）

### 层级管理
- ✅ 遮罩层级：10000
- ✅ 文字/图标层级：10001
- ✅ 进度条层级：10002
- ✅ 始终显示在最上层

## 预期结果

### 视频加载
✅ 页面加载时显示动画
✅ 视频加载完成后自动隐藏
✅ 加载失败时自动隐藏并提示错误

### 数据导入
✅ 导入开始时显示动画
✅ 进度条实时更新
✅ 显示导入进度文字
✅ 导入完成后淡出并提示成功
✅ 导入失败时自动隐藏并提示错误

### 性能
✅ 动画流畅，无卡顿
✅ 使用 Phaser Tween 系统
✅ 正确清理资源
✅ 不影响其他功能

## 注意事项

- 加载动画使用 Phaser 的 Tween 系统，完全遵循官方标准
- 所有动画对象在隐藏后会被正确销毁
- 进度条仅在数据导入时显示
- 视频加载动画不显示进度条（因为无法获取准确进度）
- 加载动画层级最高，确保始终可见
