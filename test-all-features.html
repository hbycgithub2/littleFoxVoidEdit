<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åŠŸèƒ½æµ‹è¯• - 3.1 åˆ° 3.6</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #1a1a1a; color: #fff; }
        .test-section { margin: 20px 0; padding: 15px; background: #2a2a2a; border-radius: 5px; }
        .test-section h2 { color: #00ff00; margin-top: 0; }
        .test-item { margin: 10px 0; padding: 10px; background: #333; border-radius: 3px; }
        .status { display: inline-block; width: 20px; height: 20px; border-radius: 50%; margin-right: 10px; }
        .status.pass { background: #00ff00; }
        .status.fail { background: #ff0000; }
        .status.pending { background: #ffff00; }
        button { padding: 8px 15px; margin: 5px; background: #00ff00; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #00cc00; }
        #results { margin-top: 20px; padding: 15px; background: #2a2a2a; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>ğŸ§ª åŠŸèƒ½æµ‹è¯•ï¼š3.1 åˆ° 3.6</h1>
    
    <div class="test-section">
        <h2>3.1 å›¾å±‚ç®¡ç† (LayerManager)</h2>
        <div class="test-item">
            <span class="status pending" id="test-3-1-1"></span>
            <span>LayerManager å·²åˆå§‹åŒ–</span>
        </div>
        <div class="test-item">
            <span class="status pending" id="test-3-1-2"></span>
            <span>LayerPanelController å·²åˆå§‹åŒ–</span>
        </div>
        <div class="test-item">
            <span class="status pending" id="test-3-1-3"></span>
            <span>é»˜è®¤å›¾å±‚å­˜åœ¨</span>
        </div>
        <button onclick="testLayerManager()">æµ‹è¯•å›¾å±‚ç®¡ç†</button>
    </div>
    
    <div class="test-section">
        <h2>3.2 å¯¹é½å’Œåˆ†å¸ƒå·¥å…· (AlignmentManager)</h2>
        <div class="test-item">
            <span class="status pending" id="test-3-2-1"></span>
            <span>AlignmentManager å·²åˆå§‹åŒ–</span>
        </div>
        <div class="test-item">
            <span class="status pending" id="test-3-2-2"></span>
            <span>å¯¹é½æŒ‰é’®å­˜åœ¨</span>
        </div>
        <button onclick="testAlignmentManager()">æµ‹è¯•å¯¹é½å·¥å…·</button>
    </div>
    
    <div class="test-section">
        <h2>3.3 çƒ­åŒºåˆ†ç»„ (GroupManager)</h2>
        <div class="test-item">
            <span class="status pending" id="test-3-3-1"></span>
            <span>GroupManager å·²åˆå§‹åŒ–</span>
        </div>
        <div class="test-item">
            <span class="status pending" id="test-3-3-2"></span>
            <span>åˆ†ç»„æŒ‰é’®å­˜åœ¨</span>
        </div>
        <button onclick="testGroupManager()">æµ‹è¯•åˆ†ç»„åŠŸèƒ½</button>
    </div>
    
    <div class="test-section">
        <h2>3.4 æ—¶é—´è½´å¯è§†åŒ– (TimelinePanel)</h2>
        <div class="test-item">
            <span class="status pending" id="test-3-4-1"></span>
            <span>TimelinePanel å·²åˆå§‹åŒ–</span>
        </div>
        <div class="test-item">
            <span class="status pending" id="test-3-4-2"></span>
            <span>Canvas å…ƒç´ å­˜åœ¨</span>
        </div>
        <button onclick="testTimelinePanel()">æµ‹è¯•æ—¶é—´è½´</button>
    </div>
    
    <div class="test-section">
        <h2>3.5 æ ·å¼é¢„è®¾ (StyleManager)</h2>
        <div class="test-item">
            <span class="status pending" id="test-3-5-1"></span>
            <span>StyleManager å·²åˆå§‹åŒ–</span>
        </div>
        <div class="test-item">
            <span class="status pending" id="test-3-5-2"></span>
            <span>StylePanelController å·²åˆå§‹åŒ–</span>
        </div>
        <div class="test-item">
            <span class="status pending" id="test-3-5-3"></span>
            <span>é»˜è®¤é¢„è®¾å­˜åœ¨</span>
        </div>
        <button onclick="testStyleManager()">æµ‹è¯•æ ·å¼é¢„è®¾</button>
    </div>
    
    <div class="test-section">
        <h2>3.6 åŠ è½½åŠ¨ç”» (LoadingManager)</h2>
        <div class="test-item">
            <span class="status pending" id="test-3-6-1"></span>
            <span>LoadingManager å·²åˆå§‹åŒ–</span>
        </div>
        <div class="test-item">
            <span class="status pending" id="test-3-6-2"></span>
            <span>ä½¿ç”¨ Phaser Tween ç³»ç»Ÿ</span>
        </div>
        <button onclick="testLoadingManager()">æµ‹è¯•åŠ è½½åŠ¨ç”»</button>
    </div>
    
    <button onclick="runAllTests()" style="background: #ff9900; font-size: 16px; font-weight: bold;">ğŸš€ è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
    
    <div id="results"></div>
    
    <script>
        function setStatus(id, status) {
            const el = document.getElementById(id);
            el.className = 'status ' + status;
        }
        
        function log(message) {
            const results = document.getElementById('results');
            results.innerHTML += '<div>' + new Date().toLocaleTimeString() + ' - ' + message + '</div>';
        }
        
        function testLayerManager() {
            log('å¼€å§‹æµ‹è¯•å›¾å±‚ç®¡ç†...');
            
            // æ£€æŸ¥ LayerManager
            const scene = window.game?.scene?.getScene('EditorScene');
            if (scene && scene.layerManager) {
                setStatus('test-3-1-1', 'pass');
                log('âœ… LayerManager å·²åˆå§‹åŒ–');
            } else {
                setStatus('test-3-1-1', 'fail');
                log('âŒ LayerManager æœªåˆå§‹åŒ–');
            }
            
            // æ£€æŸ¥ LayerPanelController
            if (window.layerPanelController) {
                setStatus('test-3-1-2', 'pass');
                log('âœ… LayerPanelController å·²åˆå§‹åŒ–');
            } else {
                setStatus('test-3-1-2', 'fail');
                log('âŒ LayerPanelController æœªåˆå§‹åŒ–');
            }
            
            // æ£€æŸ¥é»˜è®¤å›¾å±‚
            if (scene && scene.layerManager && scene.layerManager.getLayer('default')) {
                setStatus('test-3-1-3', 'pass');
                log('âœ… é»˜è®¤å›¾å±‚å­˜åœ¨');
            } else {
                setStatus('test-3-1-3', 'fail');
                log('âŒ é»˜è®¤å›¾å±‚ä¸å­˜åœ¨');
            }
        }
        
        function testAlignmentManager() {
            log('å¼€å§‹æµ‹è¯•å¯¹é½å·¥å…·...');
            
            const scene = window.game?.scene?.getScene('EditorScene');
            if (scene && scene.alignmentManager) {
                setStatus('test-3-2-1', 'pass');
                log('âœ… AlignmentManager å·²åˆå§‹åŒ–');
            } else {
                setStatus('test-3-2-1', 'fail');
                log('âŒ AlignmentManager æœªåˆå§‹åŒ–');
            }
            
            const alignBtn = document.getElementById('alignLeftBtn');
            if (alignBtn) {
                setStatus('test-3-2-2', 'pass');
                log('âœ… å¯¹é½æŒ‰é’®å­˜åœ¨');
            } else {
                setStatus('test-3-2-2', 'fail');
                log('âŒ å¯¹é½æŒ‰é’®ä¸å­˜åœ¨');
            }
        }
        
        function testGroupManager() {
            log('å¼€å§‹æµ‹è¯•åˆ†ç»„åŠŸèƒ½...');
            
            const scene = window.game?.scene?.getScene('EditorScene');
            if (scene && scene.groupManager) {
                setStatus('test-3-3-1', 'pass');
                log('âœ… GroupManager å·²åˆå§‹åŒ–');
            } else {
                setStatus('test-3-3-1', 'fail');
                log('âŒ GroupManager æœªåˆå§‹åŒ–');
            }
            
            const groupBtn = document.getElementById('groupBtn');
            if (groupBtn) {
                setStatus('test-3-3-2', 'pass');
                log('âœ… åˆ†ç»„æŒ‰é’®å­˜åœ¨');
            } else {
                setStatus('test-3-3-2', 'fail');
                log('âŒ åˆ†ç»„æŒ‰é’®ä¸å­˜åœ¨');
            }
        }
        
        function testTimelinePanel() {
            log('å¼€å§‹æµ‹è¯•æ—¶é—´è½´...');
            
            if (window.timelinePanel) {
                setStatus('test-3-4-1', 'pass');
                log('âœ… TimelinePanel å·²åˆå§‹åŒ–');
            } else {
                setStatus('test-3-4-1', 'fail');
                log('âŒ TimelinePanel æœªåˆå§‹åŒ–');
            }
            
            const canvas = document.getElementById('timelineCanvas');
            if (canvas) {
                setStatus('test-3-4-2', 'pass');
                log('âœ… Canvas å…ƒç´ å­˜åœ¨');
            } else {
                setStatus('test-3-4-2', 'fail');
                log('âŒ Canvas å…ƒç´ ä¸å­˜åœ¨');
            }
        }
        
        function testStyleManager() {
            log('å¼€å§‹æµ‹è¯•æ ·å¼é¢„è®¾...');
            
            const scene = window.game?.scene?.getScene('EditorScene');
            if (scene && scene.styleManager) {
                setStatus('test-3-5-1', 'pass');
                log('âœ… StyleManager å·²åˆå§‹åŒ–');
            } else {
                setStatus('test-3-5-1', 'fail');
                log('âŒ StyleManager æœªåˆå§‹åŒ–');
            }
            
            if (window.stylePanelController) {
                setStatus('test-3-5-2', 'pass');
                log('âœ… StylePanelController å·²åˆå§‹åŒ–');
            } else {
                setStatus('test-3-5-2', 'fail');
                log('âŒ StylePanelController æœªåˆå§‹åŒ–');
            }
            
            if (scene && scene.styleManager && scene.styleManager.getPresets().length >= 5) {
                setStatus('test-3-5-3', 'pass');
                log('âœ… é»˜è®¤é¢„è®¾å­˜åœ¨ (' + scene.styleManager.getPresets().length + ' ä¸ª)');
            } else {
                setStatus('test-3-5-3', 'fail');
                log('âŒ é»˜è®¤é¢„è®¾ä¸è¶³');
            }
        }
        
        function testLoadingManager() {
            log('å¼€å§‹æµ‹è¯•åŠ è½½åŠ¨ç”»...');
            
            const scene = window.game?.scene?.getScene('EditorScene');
            if (scene && scene.loadingManager) {
                setStatus('test-3-6-1', 'pass');
                log('âœ… LoadingManager å·²åˆå§‹åŒ–');
                
                // æµ‹è¯•æ˜¾ç¤º/éšè—
                scene.loadingManager.show('æµ‹è¯•åŠ è½½...', true);
                setTimeout(() => {
                    scene.loadingManager.updateProgress(0.5);
                    setTimeout(() => {
                        scene.loadingManager.hide();
                        log('âœ… åŠ è½½åŠ¨ç”»æµ‹è¯•å®Œæˆ');
                    }, 500);
                }, 500);
            } else {
                setStatus('test-3-6-1', 'fail');
                log('âŒ LoadingManager æœªåˆå§‹åŒ–');
            }
            
            if (scene && scene.tweens) {
                setStatus('test-3-6-2', 'pass');
                log('âœ… ä½¿ç”¨ Phaser Tween ç³»ç»Ÿ');
            } else {
                setStatus('test-3-6-2', 'fail');
                log('âŒ Phaser Tween ç³»ç»Ÿä¸å¯ç”¨');
            }
        }
        
        function runAllTests() {
            document.getElementById('results').innerHTML = '<h3>æµ‹è¯•ç»“æœï¼š</h3>';
            log('å¼€å§‹è¿è¡Œæ‰€æœ‰æµ‹è¯•...');
            
            testLayerManager();
            setTimeout(() => testAlignmentManager(), 100);
            setTimeout(() => testGroupManager(), 200);
            setTimeout(() => testTimelinePanel(), 300);
            setTimeout(() => testStyleManager(), 400);
            setTimeout(() => testLoadingManager(), 500);
            
            setTimeout(() => {
                log('æ‰€æœ‰æµ‹è¯•å®Œæˆï¼');
            }, 2000);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œæµ‹è¯•
        window.addEventListener('load', () => {
            setTimeout(() => {
                log('é¡µé¢åŠ è½½å®Œæˆï¼Œç­‰å¾… Phaser åˆå§‹åŒ–...');
                setTimeout(runAllTests, 1000);
            }, 500);
        });
    </script>
</body>
</html>
